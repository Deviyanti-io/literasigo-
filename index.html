<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Literasi Go - Premium Reader Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            scroll-behavior: smooth;
        }

        .bg-pattern {
            background-image: radial-gradient(#e2e8f0 0.8px, transparent 0.8px);
            background-size: 30px 30px;
        }

        @keyframes morph {
            0%, 100% { border-radius: 40% 60% 70% 30% / 40% 40% 60% 50%; }
            34% { border-radius: 70% 30% 50% 50% / 30% 30% 70% 70%; }
            67% { border-radius: 100% 60% 60% 100% / 100% 100% 60% 60%; }
        }

        .blob {
            position: fixed;
            width: 600px;
            height: 600px;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.08) 0%, rgba(147, 51, 234, 0.08) 100%);
            filter: blur(80px);
            z-index: -1;
            animation: morph 15s linear infinite alternate;
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .book-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .book-card:hover {
            transform: translateY(-12px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .hero-gradient {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .audio-wave {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 20px;
        }
        .audio-wave div {
            width: 3px;
            background: #6366f1;
            border-radius: 50px;
            animation: wave 1s ease-in-out infinite;
        }
        @keyframes wave {
            0%, 100% { height: 4px; }
            50% { height: 16px; }
        }
    </style>
</head>
<body class="bg-[#F8FAFC] bg-pattern min-h-screen text-slate-900">

    <div class="blob -top-20 -left-20"></div>
    <div class="blob -bottom-20 -right-20" style="animation-delay: -5s;"></div>

    <nav class="glass-nav sticky top-0 z-50 border-b border-slate-200/60">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3 cursor-pointer" onclick="showHome()">
                <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                </div>
                <span class="text-xl font-extrabold tracking-tight text-slate-800">Literasi<span class="text-indigo-600">Go</span></span>
            </div>
            
            <div class="relative hidden md:flex items-center">
                <input type="text" id="searchInput" onkeyup="searchBooks()" placeholder="Cari judul atau penulis..." 
                    class="bg-slate-100 border-none rounded-2xl py-2.5 pl-11 pr-6 w-80 focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all outline-none text-sm shadow-sm">
                <svg class="w-5 h-5 text-slate-400 absolute left-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-10 pb-32 relative">
        <div id="homeSection">
            <div class="relative overflow-hidden rounded-[3rem] hero-gradient p-10 md:p-16 mb-16 shadow-2xl shadow-indigo-900/20">
                <div class="relative z-10 grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <div class="inline-flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-full mb-8">
                            <span class="relative flex h-2 w-2">
                                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"></span>
                                <span class="relative inline-flex rounded-full h-2 w-2 bg-indigo-500"></span>
                            </span>
                            <span class="text-white/80 text-xs font-bold uppercase tracking-[0.2em]">Koleksi Premium</span>
                        </div>
                        <h1 class="text-5xl md:text-6xl font-black text-white leading-[1.1] mb-6 tracking-tight">
                            Temukan Dunia di <br>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400">Setiap Halaman.</span>
                        </h1>
                        <p class="text-slate-400 text-lg mb-10 leading-relaxed max-w-md">
                            Akses ribuan novel terbaik dan nikmati pengalaman audiobook berkualitas tinggi dalam satu aplikasi.
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-4 rounded-2xl font-bold transition-all shadow-lg shadow-indigo-500/25">Mulai Eksplorasi</button>
                            <button class="bg-white/5 hover:bg-white/10 text-white border border-white/20 px-8 py-4 rounded-2xl font-bold transition-all backdrop-blur-md">Lihat Kategori</button>
                        </div>
                    </div>
                    
                    <div class="hidden lg:flex justify-end relative gap-6">
                        <div class="w-36 h-52 bg-white/10 rounded-xl border border-white/20 backdrop-blur-3xl rotate-3 shadow-xl overflow-hidden flex items-center justify-center">
                            <img src="asset/images/Hujan by Tere Liye.jpg" alt="Hujan" class="w-full h-full object-cover">
                        </div>
                        <div class="w-36 h-52 bg-white/10 rounded-xl border border-white/20 backdrop-blur-3xl -rotate-2 shadow-xl overflow-hidden flex items-center justify-center">
                            <img src="asset/images/Cantik Itu Luka _ Eka Kurniawan â‚ŠâŠ¹.jpg" alt="Laskar Pelangi" class="w-full h-full object-cover">
                        </div>
                        <div class="w-36 h-52 bg-white/10 rounded-xl border border-white/20 backdrop-blur-3xl rotate-6 shadow-xl overflow-hidden flex items-center justify-center">
                            <img src="asset/images/Laut Bercerita _ Leila S_ Chudori â‚ŠâŠ¹.jpg" alt="Laut Bercerita" class="w-full h-full object-cover">
                        </div>
                    </div>
                </div>
                <div class="absolute top-0 right-0 w-96 h-96 bg-indigo-500/20 blur-[100px] rounded-full"></div>
            </div>

            <div class="mb-10">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-3xl font-black text-slate-800 tracking-tight">Kategori Populer</h2>
                </div>
                <div class="flex gap-4 overflow-x-auto pb-4 hide-scrollbar">
                    <button onclick="filterBooks('Semua')" class="cat-btn px-8 py-3.5 bg-white border border-indigo-500 text-indigo-600 rounded-2xl shadow-sm font-bold transition-all whitespace-nowrap">ðŸŒŸ Semua</button>
                    <button onclick="filterBooks('Fiksi')" class="cat-btn px-8 py-3.5 bg-white border border-slate-200 rounded-2xl shadow-sm font-bold text-slate-600 hover:border-indigo-500 hover:text-indigo-600 transition-all whitespace-nowrap">ðŸŽ­ Fiksi</button>
                    <button onclick="filterBooks('Non-Fiksi')" class="cat-btn px-8 py-3.5 bg-white border border-slate-200 rounded-2xl shadow-sm font-bold text-slate-600 hover:border-indigo-500 hover:text-indigo-600 transition-all whitespace-nowrap">ðŸ“š Non-Fiksi</button>
                    <button onclick="filterBooks('Sejarah')" class="cat-btn px-8 py-3.5 bg-white border border-slate-200 rounded-2xl shadow-sm font-bold text-slate-600 hover:border-indigo-500 hover:text-indigo-600 transition-all whitespace-nowrap">ðŸ“œ Sejarah</button>
                </div>
            </div>

            <div id="bookGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10"></div>
        </div>

        <div id="bookDetailSection" class="hidden max-w-5xl mx-auto">
            <button onclick="closeBookDetail()" class="group mb-8 flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-bold transition-all">
                <div class="p-2 bg-white rounded-xl shadow-sm group-hover:bg-indigo-50 transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/></svg>
                </div>
                Kembali ke Beranda
            </button>

            <div class="bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-slate-100">
                <div class="md:flex">
                    <div class="md:w-[40%] relative">
                        <img id="detailCover" src="" class="w-full h-[500px] object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                    </div>
                    <div class="md:w-[60%] p-10 lg:p-14">
                        <div class="flex items-center gap-3 mb-6">
                            <span id="detailCategory" class="px-4 py-1.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-extrabold uppercase tracking-widest"></span>
                            <div class="flex items-center gap-1.5 bg-amber-50 px-3 py-1.5 rounded-xl">
                                <svg class="w-4 h-4 text-amber-500 fill-current" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <span id="detailRating" class="font-bold text-amber-700 text-sm"></span>
                            </div>
                        </div>
                        <h1 id="detailTitle" class="text-4xl font-extrabold text-slate-900 mb-2 leading-tight"></h1>
                        <p id="detailAuthor" class="text-lg text-slate-400 font-medium mb-8"></p>
                        <p id="detailDescription" class="text-slate-600 leading-relaxed mb-10 text-lg"></p>
                        
                        <div class="flex flex-wrap gap-4">
                            <button onclick="setReadingMode('text')" id="btnTextMode" class="flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl font-bold transition-all shadow-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
                                Baca Buku
                            </button>
                            <button onclick="setReadingMode('audio')" id="btnAudioMode" class="flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl font-bold transition-all shadow-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/></svg>
                                Audiobook
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-10 lg:p-14 border-t border-slate-100 bg-slate-50/50">
                    <div id="textModeContent">
                        <div class="max-w-3xl mx-auto">
                            <h2 class="text-3xl font-black text-slate-800 mb-8 border-l-4 border-indigo-600 pl-6 uppercase tracking-tight">Bab 1: Awal Mula</h2>
                            <div id="bookContent" class="text-slate-700 leading-[2] whitespace-pre-line text-xl font-medium italic"></div>
                        </div>
                    </div>

                    <div id="audioModeContent" class="hidden max-w-2xl mx-auto bg-white rounded-[2rem] p-10 shadow-xl border border-slate-100">
                        <div class="flex flex-col items-center">
                            <div class="audio-wave mb-8">
                                <div style="animation-delay: 0.1s"></div><div style="animation-delay: 0.3s"></div><div style="animation-delay: 0.2s"></div><div style="animation-delay: 0.4s"></div><div style="animation-delay: 0.1s"></div>
                                <div style="animation-delay: 0.3s"></div><div style="animation-delay: 0.5s"></div><div style="animation-delay: 0.2s"></div><div style="animation-delay: 0.4s"></div><div style="animation-delay: 0.1s"></div>
                            </div>
                            <div class="w-full space-y-6">
                                <div class="flex items-center gap-4">
                                    <span id="currentTime" class="text-xs font-bold text-slate-400 w-10">0:00</span>
                                    <div class="flex-1 bg-slate-100 rounded-full h-3 cursor-pointer overflow-hidden" onclick="seekAudio(event)">
                                        <div id="progressBar" class="bg-indigo-600 h-full rounded-full transition-all"></div>
                                    </div>
                                    <span id="totalTime" class="text-xs font-bold text-slate-400 w-10 text-right">0:00</span>
                                </div>
                                <div class="flex items-center justify-center gap-10">
                                    <button onclick="skipBackward()" class="text-slate-400 hover:text-indigo-600 transition-colors">
                                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M12.5 5v14l-11-7 11-7zM22.5 5v14l-11-7 11-7z"/></svg>
                                    </button>
                                    <button onclick="togglePlay()" id="playBtn" class="w-20 h-20 bg-indigo-600 hover:bg-indigo-700 text-white rounded-3xl flex items-center justify-center shadow-2xl shadow-indigo-200 transition-all active:scale-95">
                                        <svg id="playIcon" class="w-10 h-10" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                        <svg id="pauseIcon" class="w-10 h-10 hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>
                                    </button>
                                    <button onclick="skipForward()" class="text-slate-400 hover:text-indigo-600 transition-colors">
                                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M1.5 19V5l11 7-11 7zM11.5 19V5l11 7-11 7z"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-slate-900/95 backdrop-blur-lg border border-white/10 px-8 py-4 rounded-[2rem] shadow-2xl md:hidden z-[100] w-[90%]">
        <div class="flex justify-between items-center">
            <button onclick="showHome()" class="text-indigo-400 flex flex-col items-center gap-1">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                <span class="text-[10px] font-bold uppercase tracking-wider">Beranda</span>
            </button>
            <button class="text-slate-400 flex flex-col items-center gap-1">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
                <span class="text-[10px] font-bold uppercase tracking-wider">Koleksi</span>
            </button>
            <button class="text-slate-400 flex flex-col items-center gap-1">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                <span class="text-[10px] font-bold uppercase tracking-wider">Profil</span>
            </button>
        </div>
    </nav>

    <script>
        const books = [
            {
                id: 1,
                title: "Laskar Pelangi",
                author: "Andrea Hirata",
                cover: "asset/images/Laskar Pelangi Design_ Andreas Kusumahadi.jpg",
                category: "Fiksi",
                rating: 4.8,
                duration: "8 jam 30 menit",
                description: "Kisah inspiratif tentang sepuluh anak Melayu Belitong yang haus akan ilmu pengetahuan di sekolah yang hampir roboh.",
                content: `Pagi itu, kabut tipis menyelimuti Desa Gantong. Aku berjalan bersama ayahku menuju SD Muhammadiyah...`
            },
            {
                id: 2,
                title: "Bumi Manusia",
                author: "Pramoedya Ananta Toer",
                cover: "asset/images/bumi-manusia-edit.jpg",
                category: "Sejarah",
                rating: 4.9,
                duration: "12 jam 15 menit",
                description: "Novel pertama dari Tetralogi Buru yang menceritakan kehidupan pribumi terpelajar di tengah penindasan kolonial.",
                content: `Namaku Minke. Aku seorang pribumi, Jawa, yang beruntung mendapat pendidikan Belanda...`
            },
            {
                id: 3,
                title: "Filosofi Teras",
                author: "Henry Manampiring",
                cover: "asset/images/42861019.jpg",
                category: "Non-Fiksi",
                rating: 4.7,
                duration: "6 jam 45 menit",
                description: "Panduan praktis filsafat Stoa untuk membantu Anda menemukan ketenangan dan kekuatan mental di dunia yang kacau.",
                content: `Pernahkah Anda merasa cemas berlebihan tentang hal-hal yang belum terjadi? Filosofi Stoa menawarkan solusi...`
            },
            {
                id: 4,
                title: "Laut Bercerita",
                author: "Leila S. Chudori",
                cover: "asset/images/Laut Bercerita _ Leila S_ Chudori â‚ŠâŠ¹.jpg",
                category: "Fiksi",
                rating: 4.9,
                duration: "10 jam 20 menit",
                description: "Sebuah novel yang menceritakan tentang kehilangan, persahabatan, dan perjuangan aktivis.",
                content: `Mataku terpejam, tapi aku tidak tidur. Aku berada di dasar laut yang gelap...`
            },
            {
                id: 5,
                title: "Hujan",
                author: "Tere Liye",
                cover: "asset/images/Hujan by Tere Liye.jpg",
                category: "Fiksi",
                rating: 4.7,
                duration: "7 jam 10 menit",
                description: "Tentang persahabatan, cinta, perpisahan, melupakan, dan hujan di masa depan.",
                content: `Tahun 2042. Dunia sudah sangat berbeda. Lail duduk di ruangan itu...`
            },
            {
                id: 6,
                title: "Cantik Itu Luka",
                author: "Eka Kurniawan",
                cover: "asset/images/Cantik Itu Luka _ Eka Kurniawan â‚ŠâŠ¹.jpg",
                category: "Sejarah",
                rating: 4.8,
                duration: "14 jam 05 menit",
                description: "Kisah epik yang menggabungkan sejarah, mitos, dan tragedi keluarga di masa kolonial.",
                content: `Sore itu, Dewi Ayu bangkit dari kuburannya setelah dua puluh satu tahun mati...`
            }
        ];

        let currentBook = null;
        let isPlaying = false;
        let currentTime = 0;
        let duration = 300;
        let audioInterval = null;

        // FUNGSI SEARCH (Fitur baru)
        function searchBooks() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filtered = books.filter(book => 
                book.title.toLowerCase().includes(searchTerm) || 
                book.author.toLowerCase().includes(searchTerm)
            );
            renderBooks(filtered);
        }

        // FUNGSI FILTER KATEGORI (Memunculkan 1 buku per kategori)
        function filterBooks(category) {
            const buttons = document.querySelectorAll('.cat-btn');
            
            buttons.forEach(btn => {
                if (btn.innerText.includes(category)) {
                    btn.classList.add('border-indigo-500', 'text-indigo-600');
                    btn.classList.remove('border-slate-200', 'text-slate-600');
                } else {
                    btn.classList.remove('border-indigo-500', 'text-indigo-600');
                    btn.classList.add('border-slate-200', 'text-slate-600');
                }
            });

            let filtered;
            if (category === 'Semua') {
                filtered = books;
            } else {
                const singleMatch = books.find(b => b.category === category);
                filtered = singleMatch ? [singleMatch] : [];
            }
            renderBooks(filtered);
        }

        function renderBooks(dataToRender = books) {
            const grid = document.getElementById('bookGrid');
            if (dataToRender.length === 0) {
                grid.innerHTML = `<div class="col-span-full py-20 text-center text-slate-400 font-bold">Buku tidak ditemukan...</div>`;
                return;
            }
            grid.innerHTML = dataToRender.map(book => `
                <div onclick="openBook(${book.id})" class="book-card bg-white rounded-[2.5rem] p-6 shadow-sm border border-slate-100 cursor-pointer group">
                    <div class="relative overflow-hidden rounded-[2rem] mb-6 aspect-[3/4] shadow-inner">
                        <img src="${book.cover}" alt="${book.title}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-8">
                            <span class="text-white font-bold flex items-center gap-2">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                Dengar Audiobook
                            </span>
                        </div>
                    </div>
                    <div>
                        <div class="flex items-center gap-2 mb-4">
                            <span class="px-3 py-1 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-black uppercase tracking-widest">${book.category}</span>
                            <div class="flex items-center gap-1">
                                <svg class="w-3 h-3 text-amber-500 fill-current" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <span class="text-xs font-bold text-slate-700">${book.rating}</span>
                            </div>
                        </div>
                        <h3 class="font-extrabold text-2xl text-slate-800 mb-1 group-hover:text-indigo-600 transition-colors tracking-tight">${book.title}</h3>
                        <p class="text-sm text-slate-400 font-medium">${book.author}</p>
                    </div>
                </div>
            `).join('');
        }

        function openBook(id) {
            currentBook = books.find(b => b.id === id);
            document.getElementById('detailCover').src = currentBook.cover;
            document.getElementById('detailCategory').textContent = currentBook.category;
            document.getElementById('detailRating').textContent = currentBook.rating;
            document.getElementById('detailTitle').textContent = currentBook.title;
            document.getElementById('detailAuthor').textContent = currentBook.author;
            document.getElementById('detailDescription').textContent = currentBook.description;
            document.getElementById('bookContent').textContent = currentBook.content;

            document.getElementById('homeSection').classList.add('hidden');
            document.getElementById('bookDetailSection').classList.remove('hidden');
            window.scrollTo(0,0);
            setReadingMode('text');
        }

        function closeBookDetail() {
            stopAudio();
            document.getElementById('homeSection').classList.remove('hidden');
            document.getElementById('bookDetailSection').classList.add('hidden');
            currentBook = null;
        }

        function showHome() {
            closeBookDetail();
        }

        function setReadingMode(mode) {
            const textBtn = document.getElementById('btnTextMode');
            const audioBtn = document.getElementById('btnAudioMode');
            const textContent = document.getElementById('textModeContent');
            const audioContent = document.getElementById('audioModeContent');

            if (mode === 'text') {
                textBtn.className = 'flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl font-bold transition-all bg-indigo-600 text-white shadow-lg shadow-indigo-200';
                audioBtn.className = 'flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl font-bold transition-all bg-white text-slate-500 border border-slate-200 hover:bg-slate-50';
                textContent.classList.remove('hidden');
                audioContent.classList.add('hidden');
                stopAudio();
            } else {
                textBtn.className = 'flex-1 flex-row flex items-center justify-center gap-3 px-8 py-4 rounded-2xl font-bold transition-all bg-white text-slate-500 border border-slate-200 hover:bg-slate-50';
                audioBtn.className = 'flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl font-bold transition-all bg-indigo-600 text-white shadow-lg shadow-indigo-200';
                textContent.classList.add('hidden');
                audioContent.classList.remove('hidden');
            }
        }

        function togglePlay() {
            isPlaying = !isPlaying;
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            if (isPlaying) {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
                startAudio();
            } else {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
                stopAudio();
            }
        }

        function startAudio() {
            audioInterval = setInterval(() => {
                if (currentTime >= duration) {
                    stopAudio();
                    currentTime = 0;
                } else {
                    currentTime++;
                    updateProgress();
                }
            }, 1000);
        }

        function stopAudio() {
            if (audioInterval) clearInterval(audioInterval);
            isPlaying = false;
            document.getElementById('playIcon').classList.remove('hidden');
            document.getElementById('pauseIcon').classList.add('hidden');
        }

        function updateProgress() {
            const percentage = (currentTime / duration) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('currentTime').textContent = formatTime(currentTime);
            document.getElementById('totalTime').textContent = formatTime(duration);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        function skipBackward() { currentTime = Math.max(0, currentTime - 15); updateProgress(); }
        function skipForward() { currentTime = Math.min(duration, currentTime + 15); updateProgress(); }
        function seekAudio(event) {
            const bar = event.currentTarget;
            const rect = bar.getBoundingClientRect();
            currentTime = Math.floor(((event.clientX - rect.left) / rect.width) * duration);
            updateProgress();
        }

        renderBooks();
    </script>
</body>
</html>